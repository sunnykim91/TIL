# Hooks

## useActionState
- 폼 제출이나 버튼을 눌러 생기는 액션의 결과를 기반으로 state를 업데이트 할 수 있도록 제공함
- 기본 형태 :
- ```typescript
  const [state, formAction] = useActionState(action, initialState);
  ```
- action은 비동기 함수 여야한다. initalState는 초기 상태 값이다.
- state는 pending, data, error 등 액션의 상태를 나타내는 객체
- formAction은 action함수와 state를 연결한 새로운 함수 -> 폼이 제출되면 이 함수가 호출되고 함수의 결과가 state에 반영
- 동작 방식 :
  - 사용자가 폼을 제출하면 formAction함수가 호출
  - React는 상태를 pending으로 변경하고 컴포넌트를 리렌더링
  - 비동기 액션이 완료되면 결과에 따라 success 또는 error로 변경하고 다시 리렌더링
  - UI를 업데이트
  

## useCallback
- 메모이제이션 된 콜백 함수를 반환하는 훅, 컴포넌트가 리렌더링 될 떄마다 새함수 인스턴스가 생성되는것을 방지하고, 의존성 배열의 값이 변경될때만 새 콜백 함수를 생성
- 불필요한 리렌더링 방지 및 성능 최적화
- ```typesciprt
  const memoizedCallback = useCallback(fn, dependencies);
  ```
- fn 메모이제이션 하려는 콜백 함수, 의존성 배열의 값이 변경될때만 다시 생성
- dependencies: 이 배열의 항목이 변경될떄만 함수가 다시생성
- 주요 사용 사례
  - 자식 컴포넌트에 콜백을 전달할 때 불필요한 리렌더링 방지
  - 의존성 배열에 함수를 포함시킬때 무한 루프 방지
  - 이벤트 핸들러의 안정적인 참조 유지
- ```typescript
  // 매 렌더링마다 새로운 함수가 생성됨
  function Component() {
    const handleClick = () => {
      console.log('클릭됨');
    };
    
    return <ChildComponent onClick={handleClick} />;
  }

  // useCallback사용 
  function Component() {
    const handleClick = useCallback(() => {
      console.log('클릭됨');
    }, []); // 의존성이 없으므로 함수가 한 번만 생성됨
    
    return <ChildComponent onClick={handleClick} />;
  }
  ```
- 동작 방식
  - 첫번째 렌더링 시, 함수와 의존성 배열을 저장
  - 후속 렌더링에서는 의존성배열을 비교함(이전과 현재)
  - 의존성이 변경되지 않았다면, 이전 함수 반환
  - 의존성이 변경되었다면, 새 함수를 생성하고 저장한 후 반환
- useMemo는 호출한 함수의 결과값을 캐싱한다면 , useCallback은 함수 자체를 캐싱한다.
  - ```typescript
    // 내부 구현
    function useCallback(callback, deps) {
      return useMemo(() => callback, deps);
    }
    ```


## useContext
- Props drilling을 피할 수 있도록 Context API를 함수형컴포넌트에서 쉽게 사용할수있게 해주는 훅
- ```typescript
  const MyContext = React.createContext(defaultValue);

  <MyContext.Provider value={/* 어떤 값 */}>
    {/* 자식 컴포넌트 */}
  </MyContext.Provider>
  ```
- 동작과정
  - 컴포넌트가 렌더링 될 때 React는 컴포넌트 트리를 탐색하여 가장 가까운 Provider를 찾는다.
  - Provider가 발견되면 해당 Provider의 value속성을 반환한다.
  - 없으면 컨텍스트의 기본값을 반환한다.
  - React는 Provider의 value가 변경되면 이를 감지하고 해당 컨텍스트를 사용하는 모든 컴포넌트를 리렌더링 한다.


## useDebugValue
- 커스텀 훅의 디버깅 정보를 표시하는데 사용, React DevTools 가 필요하다.
- ```typescript
  useDebugValue(value, formatFn);
  ```
- value: React DevTools에 표시할 값, 커스텀 훅의 내부상태나 중요한 값이 될 수 있음
- formatFn: 값을 포맷팅하는 함수
- 커스텀 훅 내부에서만 사용해야함. 복잡한 로직이나 중요한 상태를 가진 재사용가능한 훅에 주로 사용


## useDeferredValue
